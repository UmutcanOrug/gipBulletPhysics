cmake_minimum_required (VERSION 3.10.2)

##### PLUGIN NAME #####
set(pluginname gipBulletPhysics)


##### PLUGIN PATHS #####
set(PLUGIN_DIR ${PLUGINS_DIR}/${pluginname})
set(PLUGIN_LIBS_DIR ${PLUGIN_DIR}/libs)

##### PLUGIN SOURCES #####
list(APPEND PLUGIN_SRCS
			${PLUGIN_DIR}/src/gipBulletPhysics.cpp
			${PLUGIN_DIR}/src/gipDebugDraw.cpp
			${PLUGIN_DIR}/src/gipBaseGameObject.cpp
			${PLUGIN_DIR}/src/gImageGameObject.cpp
			${PLUGIN_DIR}/src/gModelGameObject.cpp
			${PLUGIN_DIR}/src/gGhostImageGameObject.cpp
			${PLUGIN_DIR}/src/gGhostModelGameObject.cpp
)


##### PLUGIN HEADERS #####
list(APPEND PLUGIN_INCLUDES
			${PLUGIN_DIR}/src
)

if(WIN32)

	list(APPEND PLUGIN_INCLUDES
			${PLUGIN_DIR}/src
			${PLUGIN_LIBS_DIR}/include
			${PLUGIN_LIBS_DIR}/include/bullet
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet2FileLoader
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet2FileLoader/autogenerated
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3Collision/BroadPhaseCollision
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3Collision/BroadPhaseCollision/shared
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3Collision/NarrowPhaseCollision
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3Collision/NarrowPhaseCollision/shared
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3Common
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3Common/shared
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3Dynamics
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3Dynamics/ConstraintSolver
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3Dynamics/shared
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3Geometry
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/BroadPhaseCollision
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/BroadPhaseCollision/kernels
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/Initialize
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/NarrowphaseCollision
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/NarrowphaseCollision/kernels
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/ParallelPrimitives
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/ParallelPrimitives/kernels
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/Raycast
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/Raycast/kernels
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/Rigidbody
			${PLUGIN_LIBS_DIR}/include/bullet/Bullet3OpenCL/Rigidbody/kernels
			${PLUGIN_LIBS_DIR}/include/bullet/BulletCollision
			${PLUGIN_LIBS_DIR}/include/bullet/BulletCollision/BroadPhaseCollision
			${PLUGIN_LIBS_DIR}/include/bullet/BulletCollision/CollisionDispatch
			${PLUGIN_LIBS_DIR}/include/bullet/BulletCollision/CollisionShapes
			${PLUGIN_LIBS_DIR}/include/bullet/BulletCollision/Gimpact
			${PLUGIN_LIBS_DIR}/include/bullet/BulletCollision/NarrowPhaseCollision
			${PLUGIN_LIBS_DIR}/include/bullet/BulletDynamics
			${PLUGIN_LIBS_DIR}/include/bullet/BulletDynamics/Character
			${PLUGIN_LIBS_DIR}/include/bullet/BulletDynamics/ConstraintSolver
			${PLUGIN_LIBS_DIR}/include/bullet/BulletDynamics/Dynamics
			${PLUGIN_LIBS_DIR}/include/bullet/BulletDynamics/Featherstone
			${PLUGIN_LIBS_DIR}/include/bullet/BulletDynamics/MLCPSolvers
			${PLUGIN_LIBS_DIR}/include/bullet/BulletDynamics/Vehicle
			${PLUGIN_LIBS_DIR}/include/bullet/BulletFileLoader
			${PLUGIN_LIBS_DIR}/include/bullet/BulletFileLoader/autogenerated
			${PLUGIN_LIBS_DIR}/include/bullet/BulletInverseDynamics
			${PLUGIN_LIBS_DIR}/include/bullet/BulletSoftBody
			${PLUGIN_LIBS_DIR}/include/bullet/BulletWorldImporter
			${PLUGIN_LIBS_DIR}/include/bullet/BulletXmlWorldImporter
			${PLUGIN_LIBS_DIR}/include/bullet/ConvexDecomposition
			${PLUGIN_LIBS_DIR}/include/bullet/GIMPACTUtils
			${PLUGIN_LIBS_DIR}/include/bullet/HACD
			${PLUGIN_LIBS_DIR}/include/bullet/InverseDynamics
			${PLUGIN_LIBS_DIR}/include/bullet/LinearMath
			${PLUGIN_LIBS_DIR}/include/GL
			${PLUGIN_LIBS_DIR}/include/openvr
	)
	
	
endif(WIN32)


##### PLUGIN DEPENDENCY LOCATIONS (IF ANY) #####
if(WIN32)
	list(APPEND PLUGIN_LINKDIRS
				${PLUGIN_LIBS_DIR}/lib/win32
				${PLUGIN_LIBS_DIR}/bin
	)
	
	#set(PLUGIN_LIBDIRS ${PLUGIN_LIBS_DIR}/lib/win32)
	list(APPEND PLUGIN_LIBDIRS
				${PLUGIN_LIBS_DIR}/lib/win32
	)
elseif(LINUX)
	#Linux libs here
	set(BULLET_ROOT ${ROOT_DIR}/usr/lib/x86_64-linux-gnu/cmake) 
	find_package(Bullet REQUIRED)
	list(APPEND PLUGIN_LINKLIBS ${BULLET_COLLISION_LIBRARY})
	list(APPEND PLUGIN_LINKLIBS ${BULLET_DYNAMICS_LIBRARY})
	list(APPEND PLUGIN_LINKLIBS ${BULLET_MATH_LIBRARY})
	list(APPEND PLUGIN_INCLUDES ${BULLET_INCLUDE_DIRS})
	message(STATUS "Bullet found: ${BULLET_FOUND}")
    message(STATUS "Bullet include dirs: ${BULLET_INCLUDE_DIRS}")
    message(STATUS "Bullet libraries: ${BULLET_LIBRARIES}")
	
elseif(APPLE)
	#Macos libs here
	find_package(Bullet REQUIRED)
	message(STATUS "Bullet found: ${BULLET_FOUND}")
	message(STATUS "Bullet include dirs: ${BULLET_INCLUDE_DIRS}")
	message(STATUS "Bullet libraries: ${BULLET_LIBRARIES}")
	list(APPEND PLUGIN_INCLUDES ${BULLET_INCLUDE_DIRS})
	list(APPEND PLUGIN_LINKLIBS ${BULLET_LIBRARIES})
endif(WIN32)


##### PLUGIN DEPENDENCY LINKING (IF ANY) #####					
if(WIN32)
	list(APPEND PLUGIN_LINKLIBS
				#Lib names
				LinearMath
				Bullet3Common
				BulletInverseDynamics
				BulletCollision
				BulletDynamics
				BulletSoftBody
				Bullet2FileLoader
				Bullet3Collision
				Bullet3Dynamics
				Bullet3Geometry
				Bullet3OpenCL_clew
				BulletExampleBrowserLib
				BulletFileLoader
				BulletInverseDynamicsUtils
				BulletRobotics
				BulletWorldImporter
				BulletXmlWorldImporter
				BussIK
				clsocket
				ConvexDecomposition
				freeglut
				GIMPACTUtils
				gwen
				HACD
				openvr_api
	)
elseif(LINUX)
	list(APPEND PLUGIN_LINKLIBS
				#Lib names
	)
elseif(APPLE)
	list(APPEND PLUGIN_LINKLIBS
				#Lib names
	)
endif(WIN32)